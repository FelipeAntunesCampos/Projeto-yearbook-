// Este bloco define como gerar o código do Prisma Client.
generator client {
  provider = "prisma-client-js"
}

// Este bloco define a fonte de dados (seu banco de dados).
// Foi removido qualquer 'schemas = [...]' daqui.
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ----------------------------------------------------
// Modelos (Tabelas)
// ----------------------------------------------------

// Tabela: Aluno
model Aluno {
  id        Int    @id @default(autoincrement())
  nome      String
  email     String @unique
  matricula String @unique

  // Campo sugerido para o texto do anuário
  biografia String? @db.Text

  // Relacionamentos 1 para Muitos
  mensagens Mensagem[]
  fotos     Foto[]

  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  @@map("alunos")
}

// Tabela: Mensagem (Recados no Anuário)
model Mensagem {
  id       Int    @id @default(autoincrement())
  conteudo String @db.VarChar(500)

  // Campo sugerido: Identifica quem escreveu o recado
  remetente String?

  // Chave estrangeira para o aluno que recebe o recado
  alunoId Int
  aluno   Aluno @relation(fields: [alunoId], references: [id])

  criadoEm DateTime @default(now())

  @@map("mensagens")
}

// Tabela: Foto (Mídia do Aluno)
model Foto {
  id        Int     @id @default(autoincrement())
  url       String  @db.Text
  descricao String?

  // Campo sugerido: Se a foto é a principal do perfil
  isPerfil Boolean @default(false)

  // Chave estrangeira
  alunoId Int
  aluno   Aluno @relation(fields: [alunoId], references: [id])

  criadoEm DateTime @default(now())

  @@map("fotos")
}

// Tabela: Funcionarios

model Funcionarios {
  id     Int     @id @default(autoincrement())
  nome   String
  email  String  @unique
  cargo  String?
  genero String

  // Campo sugerido para o texto do anuário
  biografia String? @db.Text

  fotos FotoFuncionario[]

  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  @@map("funcionarios")
}

model FotoFuncionario {
  id        Int     @id @default(autoincrement())
  url       String  @db.Text
  descricao String?

  // Campo sugerido: Se a foto é a principal do perfil
  isPerfil Boolean @default(false)

  // Chave estrangeira
  funcionarioId Int
  funcionario   Funcionarios @relation(fields: [funcionarioId], references: [id])

  criadoEm DateTime @default(now())

  @@map("fotosFuncionarios")
}
